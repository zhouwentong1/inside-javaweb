<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Custom ValidateBox Tooltip - jQuery EasyUI Demo</title>
    <link rel="stylesheet" type="text/css" href="themes/default/easyui.css">
    <link rel="stylesheet" type="text/css" href="themes/icon.css">
    <link rel="stylesheet" type="text/css" href="demo.css">
    <script type="text/javascript" src="jquery-3.1.0.min.js"></script>
    <script type="text/javascript" src="jquery.easyui.min.js"></script>
</head>
<script type="text/javascript">
    $(function () {
        var tabIndex = 0;
//        var valid = $('#ff1').form('validate');
//        demo($('#tt'),0);
        $('#coo').combobox({
            onChange:function(record){
                var peo = $('#coo').combobox('getValue');
                if(peo =='aa') {
                    $('#tt').tabs('disableTab',3);
                } else {
                    $('#tt').tabs('enableTab',3);
                }
            }
        });
        $('#tt').tabs({
            border: false,
            onSelect: function (title, index) {
                changeTab(tabIndex,index);
            }
        });
//        $('#select1id').combobox({
//            url:"getClose.do",
//            editable:false,
//            panelWidth:130,
//            width:130,
//            onSelect:function(record){
//                var peo = $('#closeBugChoose').combobox('getValue');
//
//                if(peo=="1"){
//                    $('#select2id').combobox({
//                        disabled:true
//                    });
//                }
//                else{
//                    $('#select2id').combobox({
//                        disabled:false
//                    });
//                }
//            }
//        });
        function demo(temp,myIndex) {
            temp.tabs({
                border: false,
                // 这个 title 是跳转的目的地的 title
                onSelect: function (title, index) {
                    changeTab(tabIndex,index)
//                var tab = $('#tt').tabs('getSelected');
//                var valid = $('#ff1').form('validate');
//                var tab1 = $('#tt').tabs('getTab', myIndex);
////                if (index != 0 && !valid ) {
//                if ((index == myIndex) && (!valid)) {
//                    alert("还没写完呢，急啥");
//                    tab1.attr("selected", true);
////                    $('#tt').tabs('selected', tab1);
//                    // 通过下标去获取
//                    $('#tt').tabs("select", myIndex);
//                } else {
//                    $('#tt').tabs('update', {
//                        tab: tab1,
//                        options: {
//                            title: "<span class='tt-inner'><img src='images/scanner.png'/><br>Scanner</span>"
//                        }
//                    });
//                }
                }
            });
        }

        function changeTab(sourceIndex,index) {
            var beforeTab = $('#tt').tabs('getTab',sourceIndex);
            beforeTab.panel('setTitle', '123');
            debugger;
            var validate = beforeTab.form('validate');
            if (!validate && index !== sourceIndex) {
                $.messager.alert('提示消息', '在当前表单还有未填项，请填完后再切换', 'warning');
                // 通过下标去获取
                $('#tt').tabs("select", sourceIndex);
                return;
            } else {
                tabIndex = index;
//            $.ajax({
//                url: basePath + "/lendRequest/cacheFormDataByCardId",
//                type: "post",
//                data: beforeTab.form('getDataObj')
//            });
            }
        }
    });

</script>
<body>
<h2>Nested Tabs</h2>

<p>The tab panel can contain sub tabs or other components.</p>

<div style="margin:20px 0;"></div>
<div class="easyui-tabs" data-options="tools:'#tab-tools'" style="width:700px;height:250px">
    <div title="Sub Tabs" style="padding:10px;" id="main">
        <div class="easyui-tabs" data-options="fit:true,plain:true" id="tt">
            <div title="Title1" style="padding:10px;" id="first">
                <form id="ff1" method="post">
                    <div>
                        <select id="coo" class="easyui-combobox" name="dept" style="width:200px;">
                            <option value="aa" >aitem1</option>
                            <option value="bb"selected>bitem2</option>
                            <option value="cc">bitem3</option>
                            <option value="dd">ditem4</option>
                            <option value="ee">eitem5</option>
                        </select>
                    </div>
                    <div>
                        <label for="email">Email:</label>
                        <input class="easyui-validatebox" type="text" name="email" required="true" validType="email">
                    </div>
                    <div>
                        <label for="subject">Subject:</label>
                        <input class="easyui-validatebox" type="text" name="subject" required="true">
                    </div>
                    <div>
                        <label for="message">Message:</label>
                        &lt;textarea name="message" style="height:60px;"&gt;&lt;/textarea&gt;
                    </div>
                </form>
            </div>
            <div title="Title2" style="padding:10px;" id="second">
                <form id="ff2" method="post">
                    <div>
                        <label for="name">Name:</label>
                        <input class="easyui-validatebox" type="text" name="name" required="true">
                    </div>
                    <div>
                        <label for="email">Email:</label>
                        <input class="easyui-validatebox" type="text" name="email" required="true" validType="email">
                    </div>
                    <div>
                        <label for="subject">Subject:</label>
                        <input class="easyui-validatebox" type="text" name="subject" required="true">
                    </div>
                    <div>
                        <label for="message">Message:</label>
                        &lt;textarea name="message" style="height:60px;"&gt;&lt;/textarea&gt;
                    </div>
                </form>
            </div>
            <div title="Title3" style="padding:10px;" id="third">
                <form id="ff3" method="post">
                    <div>
                        <label for="name">Name:</label>
                        <input class="easyui-validatebox" type="text" name="name" required="true">
                    </div>
                    <div>
                        <label for="email">Email:</label>
                        <input class="easyui-validatebox" type="text" name="email" required="true" validType="email">
                    </div>
                    <div>
                        <label for="subject">Subject:</label>
                        <input class="easyui-validatebox" type="text" name="subject" required="true">
                    </div>
                    <div>
                        <label for="message">Message:</label>
                        &lt;textarea name="message" style="height:60px;"&gt;&lt;/textarea&gt;
                    </div>
                </form>
            </div>
            <div title="Title4" style="padding:10px;" id="forth">
                <form id="ff4" method="post">
                    <div>
                        <label for="name">Name:</label>
                        <input class="easyui-validatebox" type="text" name="name" required="true">
                    </div>
                    <div>
                        <label for="email">Email:</label>
                        <input class="easyui-validatebox" type="text" name="email" required="true" validType="email">
                    </div>
                    <div>
                        <label for="subject">Subject:</label>
                        <input class="easyui-validatebox" type="text" name="subject" required="true">
                    </div>
                    <div>
                        <label for="message">Message:</label>
                        &lt;textarea name="message" style="height:60px;"&gt;&lt;/textarea&gt;
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

</body>
</html>